@startuml Vitizen Activity Flow

' Style
skinparam activity {
    BackgroundColor LightBlue
    BorderColor Navy
}
skinparam arrow {
    Color Blue
}

' Définition des activités
start
:MainActivity;

if (Premier lancement?) then (oui)
    :SplashScreen;
    if (Session existante?) then (oui)
        :HomePage;
    else (non)
        :SignInScreen;
        if (Nouvel utilisateur?) then (oui)
            :SignUpScreen;
            :Envoi email de vérification;
            :SignInScreen;
        else (non)
            if (Email vérifié?) then (non)
                :Envoi nouvel email de vérification;
                :SignInScreen;
            else (oui)
                :HomePage;
            endif
        endif
    endif
else (non)
    if (Déjà connecté?) then (oui)
        :HomePage;
    else (non)
        :SignInScreen;
    endif
endif

' Actions utilisateur
:HomePage;
if (Déconnexion?) then (oui)
    :SignInScreen;
else (non)
    if (Modification profil?) then (oui)
        :ProfileScreen;
    else (non)
        :HomePage;
    endif
endif

stop

' Notes explicatives
note right of SplashScreen
  Vérifie l'état d'authentification
  et redirige vers l'écran approprié
end note

note right of SignInScreen
  Authentification utilisateur
  Vérification email
  Gestion des erreurs
end note

note right of SignUpScreen
  Création nouveau compte
  Validation des données
  Acceptation RGPD
end note

note right of HomePage
  Affichage informations utilisateur
  Navigation vers autres fonctionnalités
  Gestion déconnexion
end note

@enduml 